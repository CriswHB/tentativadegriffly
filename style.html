<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profilter - Feed com DB</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <style>
        :root {
          --color-primary-purple: #5E35B1;
          --color-dark-bg: #1f0b38;
          --color-glow-light: #9C27B0;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--color-dark-bg);
            background-image: radial-gradient(circle at 50% 15%, rgba(130, 80, 250, 0.45) 0%, transparent 40%);
            background-attachment: fixed;
            color: #d1d5db;
        }

        .post-card {
            background-color: #1e113a;
            border: 1px solid #3c1e6e;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            transition: border-color 0.3s;
        }

        .post-card:hover { border-color: #a855f7; }

        .input-area {
            background-color: #120e1d;
            border: 1px solid #3c1e6e;
            border-radius: 12px;
            padding: 15px;
        }

        textarea {
            width: 100%;
            background: transparent;
            border: none;
            color: white;
            outline: none;
            resize: none;
            height: 80px;
        }

        .btn-post {
            background-color: #a855f7;
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: bold;
            transition: transform 0.2s;
        }

        .btn-post:hover { transform: scale(1.05); }
        
        .delete-post {
            color: #ef4444;
            cursor: pointer;
            font-size: 18px;
            opacity: 0.5;
        }
        .delete-post:hover { opacity: 1; }
    </style>
</head>
<body class="p-4 sm:p-8">

    <div class="max-w-2xl mx-auto">
        <header class="flex justify-between items-center mb-8">
            <h1 class="text-3xl font-black text-white tracking-tighter italic">PROFILTER</h1>
            <div class="flex items-center gap-3">
                <span class="text-xs font-bold text-purple-400 uppercase">Status: DB Online</span>
                <div class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
            </div>
        </header>

        <div class="post-card mb-10">
            <div class="flex gap-4">
                <img src="https://www.habbo.com.br/habbo-imaging/avatarimage?img_format=png&user=Crisw&direction=2&head_direction=2&size=m" class="w-12 h-12 rounded-full border-2 border-purple-500 bg-gray-900">
                <div class="flex-1">
                    <div class="input-area">
                        <textarea id="post-text" placeholder="No que estás a pensar?"></textarea>
                    </div>
                    <div class="flex justify-end mt-3">
                        <button onclick="publishPost()" class="btn-post flex items-center gap-2">
                            Publicar <span class="material-symbols-outlined text-sm">send</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div id="feed-container" class="space-y-6">
            </div>
    </div>

    <script>
        // --- LOGICA DA BASE DE DADOS ---

        // Dados Iniciais (Caso a DB esteja vazia)
        const INITIAL_POSTS = [
            {
                id: 1,
                author: "Equipe Griffy",
                text: "Bem-vindo ao novo Profilter! Agora as tuas postagens são salvas na base de dados local.",
                time: "Agora mesmo",
                likes: 5
            }
        ];

        // Carregar do LocalStorage
        let posts = JSON.parse(localStorage.getItem('profilterDB')) || INITIAL_POSTS;

        function saveDB() {
            localStorage.setItem('profilterDB', JSON.stringify(posts));
            renderFeed();
        }

        function publishPost() {
            const textArea = document.getElementById('post-text');
            const text = textArea.value.trim();

            if (!text) return;

            const newPost = {
                id: Date.now(),
                author: "Tu (Admin)",
                text: text,
                time: "Recentemente",
                likes: 0
            };

            posts.unshift(newPost); // Adiciona ao topo
            textArea.value = '';
            saveDB();
        }

        function deletePost(id) {
            if(confirm("Deseja apagar esta postagem da base de dados?")) {
                posts = posts.filter(p => p.id !== id);
                saveDB();
            }
        }

        function renderFeed() {
            const container = document.getElementById('feed-container');
            
            if (posts.length === 0) {
                container.innerHTML = `<p class="text-center text-gray-500 py-10">O feed está vazio. Escreve algo!</p>`;
                return;
            }

            container.innerHTML = posts.map(p => `
                <div class="post-card">
                    <div class="flex justify-between items-start mb-4">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 bg-purple-900 rounded-full flex items-center justify-center">
                                <span class="material-symbols-outlined text-purple-300">person</span>
                            </div>
                            <div>
                                <h4 class="font-bold text-white text-sm">${p.author}</h4>
                                <p class="text-[10px] text-gray-500 uppercase tracking-widest">${p.time}</p>
                            </div>
                        </div>
                        <span class="material-symbols-outlined delete-post" onclick="deletePost(${p.id})">delete</span>
                    </div>
                    <p class="text-gray-300 text-sm leading-relaxed mb-4">${p.text}</p>
                    <div class="flex items-center gap-6 border-t border-purple-900/30 pt-4">
                        <button class="flex items-center gap-1 text-xs text-gray-400 hover:text-purple-400">
                            <span class="material-symbols-outlined text-sm">favorite</span> ${p.likes}
                        </button>
                        <button class="flex items-center gap-1 text-xs text-gray-400 hover:text-purple-400">
                            <span class="material-symbols-outlined text-sm">chat_bubble</span> Comentar
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // Iniciar
        window.onload = renderFeed;
    </script>
</body>
</html>
